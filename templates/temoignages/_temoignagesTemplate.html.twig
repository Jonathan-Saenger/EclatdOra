<div class="container py-5">
    <!-- Témoignages -->
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 justify-content-center">
        {% for temoignage in temoignages %}
        <div class="col">
            <div class="card h-100 border-0 shadow-sm hover-shadow transition-all"
                 style="border-radius: 15px; min-width: 300px; max-width: 400px;">
                <div class="card-body d-flex flex-column p-4">
                    <!-- Contenu de la carte -->
                    <div class="text-center mb-4 position-relative">
                        <!-- Avatar et décor -->
                        <div class="rounded-circle position-absolute"
                             style="width: 130px; height: 130px; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: rgba(209, 144, 57, 0.1);">
                        </div>
                        <img src="{{ vich_uploader_asset(temoignage,'imageFile') }}"
                             class="rounded-circle shadow-lg position-relative"
                             width="120" height="120"
                             style="object-fit: cover; border: 4px solid #fff;"
                             alt="Photo témoignage" />
                    </div>
                    <h5 class="font-weight-bold text-center mb-1" style="color: #D19039">
                        {{temoignage.getNom() }}
                    </h5>
                    <h6 class="text-muted fw-semibold mb-3 text-center small text-uppercase tracking-wider">
                        {{temoignage.getMetier() }}
                    </h6>
                    <p class="mb-2 ps-4 pt-2 text-secondary">{{temoignage.getCommentaire() | raw}}</p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Bouton d'affichage du formulaire -->
    <div class="container text-center mt-4">
        {% if is_granted('ROLE_USER') %}
            <button id="comment" type="button" class="bouton-or mb-3">
                Me laisser un commentaire
            </button>
        {% endif %}
    </div>

    <!-- Formulaire -->
    <div id="temoignage" class="mt-4" style="display: none;">
        {{ form_start(temoignageForm) }}
        {{ form_errors(temoignageForm) }}
        <div class="row g-3">
            <div class="col-md-3">
                <div class="form-floating">
                    {{ form_widget(temoignageForm.Nom, {'attr': {'class': 'form-control', 'placeholder': 'Votre Nom'}}) }}
                    {{ form_label(temoignageForm.Nom, 'Nom & Prénom') }}
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-floating">
                    {{ form_widget(temoignageForm.Email, {'attr': {'class': 'form-control', 'placeholder': 'Votre Email'}}) }}
                    {{ form_label(temoignageForm.Email, 'Votre Email') }}
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-floating">
                    {{ form_widget(temoignageForm.Metier, {'attr': {'class': 'form-control', 'placeholder': 'Votre Metier'}}) }}
                    {{ form_label(temoignageForm.Metier, 'Profession') }}
                </div>
            </div>
            <div class="col-12">
                <div class="form-floating">
                    {{ form_widget(temoignageForm.Commentaire, {'attr': {'class': 'form-control', 'placeholder': 'Votre message', 'style': 'height: 150px;'}}) }}
                    {{ form_label(temoignageForm.Commentaire, 'Votre commentaire/temoignage') }}
                </div>
            </div>
            <div class="col-12">
                <button class="bouton-or" type="submit">Envoyer</button>
            </div>
        </div>
        {{ form_end(temoignageForm) }}
    </div>
</div>

<script>
document.getElementById('comment').addEventListener('click', function(event) {
    const temoignageDiv = document.getElementById('temoignage');
    // Alterner entre afficher et masquer
    if (temoignageDiv.style.display === 'none' || temoignageDiv.style.display === '') {
        temoignageDiv.style.display = 'block';
    } else {
        temoignageDiv.style.display = 'none';
    }
});
</script>

<style>
#temoignage {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
    background: #f9f9f9;
    border-radius: 10px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}
</style>
