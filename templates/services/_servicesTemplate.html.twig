<div class="fond">
    <div class="container mt-3 text-center">
        <h2>Découvrez mes prestations</h2>
        <p class="lead text-body-secondary">N'hésitez pas à me contacter pour en savoir plus !</p>
    </div>
    <div class="album mb-3">
        <div class="container position-relative">
            <!-- Début du carousel personnalisé -->
            <div class="carousel-container overflow-hidden">
                <div id="carouselTrack" class="carousel-track d-flex">
                    <!-- Cartes -->
                    <div class="card shadow-sm hover-shadow transition-all me-3">
                        <img src="{{asset('images/presentation_lucia.webp')}}" class="img-fluid" alt="Luminothérapie">
                        <div class="card-body">
                            <h3 class="card-title">Luminothérapie</h3>
                            <p class="card-text">Éveillez vos sens et illuminez votre esprit avec une expérience lumineuse unique qui ouvre les portes de la perception et enrichit votre vie quotidienne.</p>
                        </div>
                    </div>
                    <div class="card shadow-sm hover-shadow transition-all me-3">
                        <img src="{{asset('images/presentation_hypnose.webp')}}" class="img-fluid" alt="Hypnose transpersonnelle">
                        <div class="card-body">
                            <h3 class="card-title">Hypnose transpersonnelle</h3>
                            <p class="card-text">Je vous transporte dans un voyage intérieur où les frontières de la conscience s'élargissent pour révéler un potentiel illimité.</p>
                        </div>
                    </div>
                    <div class="card shadow-sm hover-shadow transition-all me-3">
                        <img src="{{asset('images/presentation_meditation.webp')}}" class="img-fluid" alt="Méditation guidée">
                        <div class="card-body">
                            <h3 class="card-title">Méditation guidée</h3>
                            <p class="card-text">Dans le silence, effectuez un voyage vers la paix intérieure et la clarté mentale, où le tumulte du quotidien se dissipe dans un océan de calme.</p>
                        </div>
                    </div>
                    <div class="card shadow-sm hover-shadow transition-all me-3">
                        <img src="{{asset('images/services_soins.webp')}}" class="img-fluid" alt="Luminothérapie">
                        <div class="card-body">
                            <h3 class="card-title">Soin vibratoire</h3>
                            <p class="card-text">Les soins vibratoires offrent un état de relaxation et un lâcher-prise profond immédiat pour apaiser le corps et l'esprit.</p>
                        </div>
                    </div>
                    <div class="card shadow-sm hover-shadow transition-all me-3">
                        <img src="{{asset('images/services_constellation_boncadeaux.webp')}}" class="img-fluid" alt="Luminothérapie">
                        <div class="card-body">
                            <h3 class="card-title">Constellation familiale</h3>
                            <p class="card-text">Révélez et transformez vos dynamiques familiales pour un futur épanoui.</p>
                        </div>
                    </div>
                    <div class="card shadow-sm hover-shadow transition-all me-3">
                        <img src="{{asset('images/reiki_cadeau.webp')}}" class="img-fluid" alt="Luminothérapie">
                        <div class="card-body">
                            <h3 class="card-title">Séance de Reiki</h3>
                            <p class="card-text">Avec cette méthode je capte, canalise et je transmets cette force de vie universelle à travers des exercices simples sur le corps, l'esprit et la conscience.</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Flèches de navigation -->
            <button class="carousel-control-prev custom-carousel-control" id="prevButton" type="button">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next custom-carousel-control" id="nextButton" type="button">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
    <div class="container mt-3 text-center">
        <a type="button" class="bouton-or mb-3" href="{{path('app_construction')}}">Réserver une séance</a>
    </div>
</div>

<style>
.carousel-container {
    position: relative;
    width: 100%;
}

.carousel-track {
    display: flex;
    transition: transform 0.5s ease-in-out;
}

.card {
    flex: 0 0 calc(33.333% - 1rem);
    max-width: calc(33.333% - 1rem);
}

/* Flèches noires et centrées verticalement */
.custom-carousel-control {
    width: 4rem;
    height: 4rem;
    color: white;
    background-color: rgba(165, 115, 45, 0.7); /* Darker version of the testimonial carousel control color */
    border-radius: 50%;
    opacity: 1;
    top: 50%;
    transform: translateY(-50%);
    position: absolute;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.3s ease;
}

.custom-carousel-control:hover {
    background-color: rgba(135, 95, 35, 0.85); /* Even darker on hover */
}

.carousel-control-prev {
    left: -2rem;
}

.carousel-control-next {
    right: -2rem;
}

.hover-shadow {
    transition: all 0.3s ease;
}

.hover-shadow:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 24px rgba(0,0,0,0.1) !important;
}

.tracking-wider {
    letter-spacing: 0.05em;
}

.transition-all {
    transition: all 0.3s ease-in-out;
}

@media (max-width: 768px) {
    .carousel-track {
        justify-content: flex-start; /* Alignement à gauche */
    }

    .card {
        flex: 0 0 calc(100% - 1rem); /* Largeur complète moins la marge */
        max-width: calc(100% - 1rem);
        margin-right: 1rem;
    }

    .carousel-container {
        overflow-x: hidden; /* Cache le dépassement horizontal */
    }
}
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const track = document.getElementById('carouselTrack');
    const prevButton = document.getElementById('prevButton');
    const nextButton = document.getElementById('nextButton');
    const cards = track.querySelectorAll('.card');

    let cardWidth;
    let visibleCards;
    let maxIndex;
    let currentIndex = 0;

    function calculateCarouselParams() {
        // Largeur d'une carte incluant sa marge
        cardWidth = cards[0].offsetWidth + 16;

        // Calculer combien de cartes sont visibles dans le conteneur
        visibleCards = Math.floor(track.offsetWidth / cardWidth);

        // Calculer le nombre maximum de décalages possibles
        // Soustraire 1 de visibleCards pour éviter le dépassement
        maxIndex = Math.max(0, cards.length - visibleCards);
    }

    function updateCarousel() {
        const offset = -currentIndex * cardWidth;
        track.style.transform = `translateX(${offset}px)`;

        // Gérer l'état des boutons
        prevButton.disabled = currentIndex === 0;
        nextButton.disabled = currentIndex >= maxIndex;
    }

    function recalculateLimits() {
        calculateCarouselParams();
        currentIndex = Math.min(currentIndex, maxIndex);
        updateCarousel();
    }

    nextButton.addEventListener('click', function () {
        if (currentIndex < maxIndex) {
            currentIndex++;
            updateCarousel();
        }
    });

    prevButton.addEventListener('click', function () {
        if (currentIndex > 0) {
            currentIndex--;
            updateCarousel();
        }
    });

    // Recalculer lors du redimensionnement
    window.addEventListener('resize', recalculateLimits);

    // Calcul initial
    calculateCarouselParams();
    updateCarousel();
});

</script>
